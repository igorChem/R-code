{
    "contents" : "## Análises de GIS da bacia taquari\n\n### Etapas\n\n# 0. Detalhes do software \n# 1. Carregamento das matrizes \n# 2. plotar means \n# 3. plotar distribuições \n# 4. Fazer PCAs \n# 5. Arrumar as distribuições \n# 6. fazer PCAs \n# 7, modelos de distribuição espacial\n\n\n# 0. Detalhes do software \n# a. load packages \n\nlibrary(sp)\nlibrary(raster)\nlibrary(maptools)\nlibrary(shapefiles)\nlibrary(fields)\nlibrary(caret)\nlibrary(rgdal)\nlibrary(kernlab)\nlibrary(pls)\nlibrary(fields)\nlibrary(gplots)\n\n# b. set working directory\n\nsetwd(\"r/GIs\")\ndir()\n\n# 1. Carregamento das matrizes \n\nma <-read.delim(\"Ma\")\nsts <-read.delim(\"STS\")\nta <-read.delim(\"TA\")\ndbo <-read.delim(\"DBO\")\n\n# 2. plotar means e estatpsitica descritiva \nattach(ma)\nsummary(ma)\nplotmeans(MA.t.ano~Municipio,ylab=\"MA t/ano\")\nplotmeans(Concentração.g.d~Municipio)\nplotmeans(Concentração.g.d~Setor.Industrial)\nplotmeans(MA.t.ano~Setor.Industrial)\n\naggregate(MA.t.ano~Municipio,FUN=mean,simplify=T)\naggregate(MA.t.ano~Municipio,FUN=sd,simplify=T)\naggregate(Concentração.g.d~Municipio,FUN=mean,simplify=T)\naggregate(Concentração.g.d~Municipio,FUN=sd,simplify=T)\n\ndetach(ma)\nattach(dbo)\nplotmeans(DBO.t.ano~Municipio)\nplotmeans(Concentração.g.d~Municipio)\nplotmeans(Concentração.g.d~Setor.Industrial)\nplotmeans(DBO.t.ano~Setor.Industrial)\n\naggregate(DBO.t.ano~Municipio,FUN=mean,simplify=T)\naggregate(DBO.t.ano~Municipio,FUN=sd,simplify=T)\naggregate(Concentração.g.d~Municipio,FUN=mean,simplify=T)\naggregate(Concentração.g.d~Municipio,FUN=sd,simplify=T)\n\ndetach(dbo)\nattach(sts)\nplotmeans(STS.t.ano~Municipio)\nplotmeans(Concentração.g.d~Municipio)\nplotmeans(Concentração.g.d~Setor.Industrial)\nplotmeans(sts.t.ano~Setor.Industrial)\n\naggregate(STS.t.ano~Municipio,FUN=mean,simplify=T)\naggregate(STS.t.ano~Municipio,FUN=sd,simplify=T)\naggregate(Concentração.g.d~Municipio,FUN=mean,simplify=T)\naggregate(Concentração.g.d~Municipio,FUN=sd,simplify=T)\n\ndetach(sts)\nattach(ta)\nplotmeans(TA.t.ano~Municipio)\nplotmeans(Concentração.g.d~Municipio)\nplotmeans(Concentração.g.d~Setor.Industrial)\nplotmeans(TA.t.ano~Setor.Industrial)\n\naggregate(TA.t.ano~Municipio,FUN=mean,simplify=T)\naggregate(TA.t.ano~Municipio,FUN=sd,simplify=T)\naggregate(Concentração.g.d~Municipio,FUN=mean,simplify=T)\naggregate(Concentração.g.d~Municipio,FUN=sd,simplify=T)\n\n# 3. plotar distribuições \n\nplot(density(MA.t.ano))\nplot(density(DBO.t.ano))\nplot(density(STS.t.ano))\nplot(density(TA.t.ano))\n\n\nattach(ma)\nplot(density(Concentração.g.d)) \ndetach(ma)\nattach(dbo) \nplot(density(Concentração.g.d)) \ndetach(dbo)\nattach(sts)\nplot(density(Concentração.g.d))\ndetach(sts)\nattach(ta) \nplot(density(Concentração.g.d))\n\n\n# 4. Fazer PCAs \n\n# a. MA\nattach(ma)\nma1 <-data.frame(Longitude,Latitude,MA.t.ano,Concentração.g.d)\npca1 <-prcomp(ma1,scale=T) \n\nsummary(pca1) # 3 pcs 85%, 4 pcs 100%\nbiplot(pca1)\nbiplot(pca1,choice=c(1,3)\n\ndetach(ma)\n# b. dbo\nattach(dbo)\ndbo1 <-data.frame(Longitude,Latitude,DBO.t.ano,Concentração.g.d)\n\npca2 <-prcomp(dbo1,scale=T) \n\nsummary(pca2) # 3 pcs 86%, 4 pcs 100%\nbiplot(pca2,xlab=\"PC1(37%)\",ylab=\"PC2(32%)\")\ndetach(dbo)\n# c.sts \nattach(sts) \nsts1 <-data.frame(Longitude,Latitude,STS.t.ano,Concentração.g.d)\n\npca3 <-prcomp(sts1,scale=T)\nsummary(pca3)\nbiplot(pca3)\n\ndetach(sts)\n# d. ta\n\nattach(ta)\nta1 <-data.frame(Longitude,Latitude,TA.t.ano,Concentração.g.d)\n\npca4 <-prcomp(ta1,scale=T)\nsummary(pca4)\nbiplot(pca4)\n\n\n# 5. Arrumar as distribuições \n\n# a. estatística descritiva\n\n#median \n\nsummary(ma)  # 0.007420;8.055e-09\nsummary(dbo) # 0.45; 4.770e-07\nsummary(sts) #  0.550; 0.130\nsummary(ta)  # 0.130; 1.240e-07\n\nma2 <-subset(ma1,!MA.t.ano>0.007420)\nma2 <-subset(ma2,!Concentração.g.d>8.055e-09)\nplot(density(ma2[,3])) # boa\nplot(density(sqrt(ma2[,4]))) # boa; tove que usar a raiz \n\ndetach(ma)\nattach(dbo)\ndbo2 <-subset(dbo1,!DBO.t.ano>0.45)\ndbo2 <-subset(dbo2,!Concentração.g.d>4.770e-07)\nplot(density(sqrt(dbo2[,3])))\nplot(density(sqrt(dbo2[,4])))\n\n\ndetach(dbo)\nattach(sts) \n\nsts2 <-subset(sts1,!STS.t.ano>0.550)\nsts2 <-subset(sts2,!Concentração.g.d>1.240e-07)\nplot(density(sqrt(sts2[,3])))\nplot(density(sqrt(sts2[,4]))) # \n\ndetach(sts)\nattach(ta)\nta2 <-subset(ta1,!TA.t.ano> 0.130)\nta2 <-subset(ta2,!Concentração.g.d>1.240e-07)\nplot(density(sqrt(ta2[,3])))\nplot(density(sqrt(ta2[,4])))\n\ndetach(ta)\n\n# 6. fazer PCAs \n\npca01 <-prcomp(ma2,scale=T)\nsummary(pca01) # aumentou a explicação do sistema \nbiplot(pca01)\n\npca02 <-prcomp(dbo2,scale=T)\nsummary(pca02)\nbiplot(pca02)\n\npca03 <-prcomp(sts2,scale=T)\nsummary(pca03)\nbiplot(pca03)\n\npca04 <-prcomp(ta2,scale=T)\nsummary(pca04)\nbiplot(pca04)\n\n# 7, modelos de distribuição espacial\n\n# a. modelos de TPS\n# testar as interpolações; verificar a necessidade de mais dados \n# otimizar as funções de interpolação \n\n# analisar argumentos da função. \n\n# para as emissões de MA \nattach(ma2)\nxy1 <-data.frame(Longitude,Latitude)\nv1 <-data.frame(xy1,MA.t.ano)\nmod1 <-Tps(xy1,MA.t.ano,m=3,lon.lat=T)\n\np <-raster(t2)\np <-interpolate(p,mod1)\n\np1 <-mask(p,t2)\nplot(p1)\n\n# para as concentrações de MA\nxy2 <-data.frame(Longitude,Latitude)\nv2 <-data.frame(xy2,Concentração.g.d)\nmod2 <-Tps(xy2,Concentração.g.d,m=2)\n\npc <-interpolate(p,mod2)\npse <-interpolate(p,mod2,fun=predictSE)\n\np1 <-mask(p,t2)\nplot(p1)\n\npse1 <-mask(pse,t2)\nplot(pse1)\n\n\ndetach(ma2)\nattach(dbo2)\n\n# Para as emissões de DBO \nxy3 <-data.frame(Longitude,Latitude)\nv3 <-data.frame(xy3,DBO.t.ano)\nmod3 <-Tps(xy3,DBO.t.ano,m=3)\n\np3 <-raster(t2)\np3 <-interpolate(p3,mod3)\n\npe3 <-mask(p3,t2)\nplot(pe3)\n\n# Para as concentrações de DBO \nxy4 <-data.frame(Longitude,Latitude)\nv4 <-data.frame(xy4,Concentração.g.d)\nmod4 <-Tps(xy4,Concentração.g.d,m=3)\n\np4 <-raster(t2)\np4 <-interpolate(p4,mod4)\n\npe4 <-mask(p4,t2)\nplot(pe4)\n\n\ndetach(dbo2)\nattach(sts2)\n# Para as emissões de STS \nxy5 <-data.frame(Longitude,Latitude)\nmod5 <-Tps(xy5,STS.t.ano,m=3)\n\np5 <-raster(t2)\np5 <-interpolate(p5,mod5)\n\npe5 <-mask(p5,t2)\nplot(pe5)\n\n# para as emissões8\nxy6 <-data.frame(Longitude,Latitude)\nmod6 <-Tps(xy6,Concentração.g.d,m=2)\n\np6 <-raster(t2)\np6 <-interpolate(p6,mod6)\n\npe6 <-mask(p6,t2)\nplot(pe6)\npoints(xy6)\n\ndetach(sts2)\nattach(ta2)\n\nxy7 <-data.frame(Longitude,Latitude)\nmod7 <-Tps(xy7,TA.t.ano,m=3)\n\np7 <-raster(t2)\np7 <-interpolate(p,mod7)\n\npe7 <-mask(p7,t2)\nplot(pe7)\npoints(xy7)\n\nmod8 <-Tps(xy7,Concentração.g.d,m=3)\n\np8 <-raster(t2)\np8 <-interpolate(p8,mod8)\n\npe8 <-mask(p8,t2)\nplot(pe8)\n\n#create raster brick for the emissions \n\nrbem <-brick(p1,pe3,pe5,pe7)\nplot(rbem)\n\nsr <-sampleRandom(rbem,300)\npca21 <- prcomp(sr,scale=T)\n\n\n\n\n",
    "created" : 1457619975030.000,
    "dirty" : true,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "4162256118",
    "id" : "89773C16",
    "lastKnownWriteTime" : 1457619946,
    "path" : "~/r/GIs/exploratory",
    "project_path" : "exploratory",
    "properties" : {
    },
    "relative_order" : 6,
    "source_on_save" : false,
    "type" : "r_source"
}